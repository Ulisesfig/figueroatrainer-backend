const fs = require('fs'); const path = 'src/models/PasswordReset.js'; let content = fs.readFileSync(path, 'utf8'); const newMethod = ',\n\n  countRecentAttemptsForEmail: async (email, windowMinutes = 10) => {\n    const text = \n      SELECT COUNT(*) as count\n      FROM password_resets\n      WHERE email =  AND created_at > NOW() - INTERVAL ''$' + '{windowMinutes} minutes''\n    ;\n    const res = await query(text, [email]);\n    return parseInt(res.rows[0].count, 10);\n  }'; content = content.replace('  }' + String.fromCharCode(10) + '};', '  }' + newMethod + String.fromCharCode(10) + '};'); fs.writeFileSync(path, content); console.log('âœ… Modelo actualizado');